<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ledger</title>
    <link rel="stylesheet" href="/static/ledger/css/debts/debts.css">
    <link rel="stylesheet" href="/static/ledger/css/ledger/sidebar.css">
</head>
<body>
<aside class="sidebar">
    <h1>Ledger</h1>
    <nav class="nav">
        <a href="/"> ⬅️ Go Back</a>
        <a href="/ledger">Accounts</a>
        <a href="/ledger/planning">Financial Planning</a>
        <a href="/ledger/debts" class="active">Debts</a>
        <a href="/ledger/invoices">Invoices</a>
    </nav>
</aside>

<!-- Track New Debt Modal -->
<div class="modal" id="trackModal">
    <div class="modal-content">
        <span class="close" id="closeTrackModal">&times;</span>
        <h3>Track New Debt</h3>
        <form id="trackDebtForm">
            <label>Debtor (who owes):</label>
            <input type="text" name="debtor" required>

            <label>Debtee (who's owed):</label>
            <input type="text" name="debtee" required>

            <label>Amount ($):</label>
            <input type="number" name="amount" min="0" step="0.01" required>

            <label>Start Date:</label>
            <input type="date" name="start_date">

            <label>Due Date:</label>
            <input type="date" name="due_date">

            <label>Description:</label>
            <textarea name="description" rows="3" placeholder="Optional notes about this debt..."></textarea>

            <label>CFID (optional):</label>
            <input type="number" name="cfid" min="0" step="1" placeholder="Enter CFID if applicable">

            <button type="submit" class="btn track-debt">Add Debt</button>
        </form>
    </div>
</div>

<!-- Subtract From Debt Modal -->
<div class="modal" id="payModal">
    <div class="modal-content">
        <span class="close" id="closePayModal">&times;</span>
        <h3>Subtract from Debt</h3>
        <form id="payDebtForm">
            <label>Debtor (who owes):</label>
            <input type="text" name="debtor" required>

            <label>Debtee (who's owed):</label>
            <input type="text" name="debtee" required>

            <!-- Dropdown menu that shows which debts this person owes (the items, not the total) -->
            <label>Select Debt to Pay Off:</label>
            <select name="record_id" id="debtRecordSelect" required>
                <option value="">-- Select a debt record --</option>
            </select>

            <label>Amount to Subtract ($):</label>
            <input type="number" name="amount" min="0" step="0.01" required>

            <button type="submit" class="btn pay-debt">Submit Payment</button>
        </form>
    </div>
</div>

<main class="main">
    <section class="debts-section">
        <h2>Unpaid Debts</h2>
        <table class="debts-table">
            <thead>
              <tr>
                <th>Debtor</th>
                <th>Debtee</th>
                <th>Amount ($)</th>
                <th>Start Date</th>
                <th>Due Date</th>
                <th>Status</th>
              </tr>
            </thead>
              <tbody id="debtsTableBody">
                <!-- Rows will be injected here -->
              </tbody>
        </table>
        <div class="debts-actions">
            <button class="btn track-debt" id="openTrackModal">Track New Debt</button>
            <button class="btn pay-debt" id="openPayModal">Subtract from Debt</button>
        </div>
    </section>
</main>
<script src="/static/ledger/js/debts/modal.js"></script>
</body>
</html>
